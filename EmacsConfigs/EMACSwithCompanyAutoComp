;;; -*- lexical-binding: t; -*-
;; Package Manager Configuration
(require 'package)
(setq package-archives
      '(("melpa" . "https://melpa.org/packages/")
        ("gnu" . "https://elpa.gnu.org/packages/")))
(package-initialize)

(unless package-archive-contents
  (package-refresh-contents))

;; Ensure use-package is installed
(unless (package-installed-p 'use-package)
  (package-install 'use-package))

;; AutoComplete with Company Mode
(use-package company
  :ensure t
  :config
  (global-company-mode 1))

;; LSP Mode Configuration for C and C++
(use-package lsp-mode
  :ensure t
  :commands (lsp)
  :hook ((c-mode c++-mode) . (lambda ()
                               (lsp)
                               (flymake-mode -1))) ;; disable flymake
  :config
  (setq lsp-idle-delay 0.0) ;; Respond instantly
  (setq lsp-completion-provider :capf) ;; Integrate with company
  (setq lsp-diagnostics-provider :none) ;; ‚ùå Disable diagnostics completely
  (setq lsp-enable-symbol-highlighting nil) ;; No highlight
  (setq lsp-enable-on-type-formatting nil)) ;; No auto-formatting

;; UI Customizations
(menu-bar-mode -1) ;; Remove menu bar
(tool-bar-mode -1) ;; Remove tool bar
(scroll-bar-mode -1) ;; Remove scroll bar
(setq inhibit-startup-screen t) ;; Disable startup screen
(setq-default indent-tabs-mode nil  ;; Use spaces instead of tabs globally
              tab-width 4)          ;; Set global tab width to 4 spaces
(setq display-line-numbers-type 'relative)
(global-display-line-numbers-mode t) ;; Enable relative line numbers

;; Font and UI Settings
(set-face-attribute 'default nil
                    :family "DejaVu Sans Mono"
                    :height 200)

;; Fullscreen on Startup
(add-to-list 'default-frame-alist '(fullscreen . fullboth))

;; Remove default scratch buffer message
(setq initial-scratch-message nil)

;; Enable icomplete-mode for minibuffer autocomplete
(icomplete-mode 1)

;; Disable Arrow Keys with Guidance
(global-set-key (kbd "<up>")
                (lambda () (interactive) (message "Use C-p instead of the up arrow key!")))
(global-set-key (kbd "<down>")
                (lambda () (interactive) (message "Use C-n instead of the down arrow key!")))
(global-set-key (kbd "<left>")
                (lambda () (interactive) (message "Use C-b instead of the left arrow key!")))
(global-set-key (kbd "<right>")
                (lambda () (interactive) (message "Use C-f instead of the right arrow key!")))

;; Disable Flycheck globally (no external checker tries to show errors)
(use-package flycheck
  :config
  (global-flycheck-mode -1))

;; Theme
(load-theme 'gruber-darker t)
